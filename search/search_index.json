{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Welcome to Python Image Processor","text":""},{"location":"#documentation-contents","title":"Documentation Contents","text":"<ul> <li>Architecture: High-level overview of how the app works.</li> <li>API Reference: Technical documentation for the code.</li> <li>Roadmap: Future plans.</li> <li>Overview: Project Overview</li> </ul>"},{"location":"ARCHITECTURE/","title":"Architecture Overview","text":"<p>This document provides a high-level overview of the Python Image Processor's internal design and component structure.</p>"},{"location":"ARCHITECTURE/#system-components","title":"System Components","text":""},{"location":"ARCHITECTURE/#1-gui-application-apppy","title":"1. GUI Application (<code>app.py</code>)","text":"<p>The user interface is built using Tkinter with the Sun Valley (sv_ttk) theme for a modern dark mode aesthetic.</p> <ul> <li><code>ImageProcessorApp</code> Class: The main entry point. It inherits from <code>tk.Tk</code> and manages the entire lifecycle of the application.</li> <li>Threading Model: To prevent the UI from freezing during heavy image processing tasks, the app spawns a separate <code>threading.Thread</code> for the <code>process_images</code> function.</li> <li>Event Loop: The main Tkinter event loop handles user inputs (clicks, folder selection) while the background thread updates the UI via a thread-safe logging mechanism.</li> </ul>"},{"location":"ARCHITECTURE/#2-core-processing-logic-image_processorpy","title":"2. Core Processing Logic (<code>image_processor.py</code>)","text":"<p>This module is decoupled from the GUI, allowing it to be used as a CLI tool or imported as a library.</p> <ul> <li>Dependency: Heavily relies on PIL (Pillow) for all image manipulations.</li> <li>Key Functions:<ul> <li><code>crop_image()</code>: Calculates center-based cropping coordinates to fit specific aspect ratios (e.g., 16:9).</li> <li><code>add_watermark()</code>: Creates a transparent text layer and composites it over the original image.</li> <li><code>process_images()</code>: The orchestrator function that iterates through files and applies transformations in a specific order.</li> </ul> </li> </ul>"},{"location":"ARCHITECTURE/#image-processing-pipeline","title":"Image Processing Pipeline","text":"<p>When a batch job is started, each image goes through the following transformation pipeline:</p> <ol> <li>Input Validation: Checks if the file is a valid image (PNG, JPEG, BMP, WebP, etc.).</li> <li>Cropping (Optional): If enabled, crops the image from the center to the target aspect ratio.</li> <li>Resizing (Optional): Scales the image to the target width using <code>Image.Resampling.LANCZOS</code> for high quality.</li> <li>Watermarking (Optional): Applies the text watermark with customizable opacity.</li> <li>Format Conversion: Converts the image to the target format (e.g., RGBA to RGB for JPEG).</li> <li>Compression: Saves the final file with the specified quality setting (1-100).</li> </ol>"},{"location":"CONTRIBUTING/","title":"Contributing to Python Image Processor","text":"<p>First off, thank you for considering contributing to Python Image Processor! It's people like you that make the open-source community such an amazing place to learn, inspire, and create.</p>"},{"location":"CONTRIBUTING/#how-can-i-contribute","title":"How Can I Contribute?","text":""},{"location":"CONTRIBUTING/#reporting-bugs","title":"Reporting Bugs","text":"<p>This project uses GitHub Issues to track bugs. If you find a bug, please open a new issue. We have a Bug Report template ready for you to fill out.</p>"},{"location":"CONTRIBUTING/#suggesting-enhancements","title":"Suggesting Enhancements","text":"<p>If you have an idea for a new feature or an improvement to an existing one, please submit a Feature Request using our issue template.</p>"},{"location":"CONTRIBUTING/#pull-requests","title":"Pull Requests","text":"<ol> <li>Fork the repository and clone it locally.</li> <li>Create a branch for your edits. Please use a descriptive name for your branch (e.g., <code>feature/add-user-login</code> or <code>bugfix/memory-leak</code>).</li> <li>Make your changes in your local branch.</li> <li>Submit a Pull Request to the <code>main</code> branch.</li> </ol>"},{"location":"CONTRIBUTING/#development-setup","title":"Development Setup","text":"<p>If you want to run the code locally to test changes, follow these steps:</p> <ol> <li> <p>Clone the repository: <code>bash     git clone https://github.com/KnowOneActual/python-image-processor.git     cd python-image-processor</code></p> </li> <li> <p>Set up your environment:     We recommend using a virtual environment to manage dependencies.     <code>bash     python3 -m venv .venv     source .venv/bin/activate  # On Windows use: .venv\\Scripts\\activate</code></p> </li> <li> <p>Install dependencies: <code>bash     pip install -r requirements.txt</code></p> </li> <li> <p>Run the application:</p> <ul> <li>GUI: <code>python app.py</code></li> <li>CLI: <code>python image_processor.py --help</code></li> </ul> </li> </ol>"},{"location":"CONTRIBUTING/#project-structure","title":"Project Structure","text":"<p>To help you navigate the codebase: * <code>app.py</code>: The main desktop GUI application (Tkinter). * <code>image_processor.py</code>: The core processing logic (cropping, resizing, watermarking). * <code>input_images/</code>: Use this directory for testing your input files. * <code>output_images/</code>: The default location for processed files.</p>"},{"location":"CONTRIBUTING/#coding-standards","title":"Coding Standards","text":"<p>Please adhere to the following standards to keep the codebase consistent:</p> <ul> <li>Indentation: Use 2 spaces for all files (Python, Markdown, etc.).</li> <li>Line Endings: Use Unix-style (LF) line endings.</li> <li>Encoding: UTF-8.</li> <li>Imports: Keep imports organized at the top of the file.</li> </ul>"},{"location":"CONTRIBUTING/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under the MIT License.</p>"},{"location":"overview/","title":"Overview","text":""},{"location":"overview/#project-overview","title":"Project Overview","text":"<p>This is a Python-based image processing tool that provides bulk image processing capabilities including resizing, format conversion, and watermarking. The project offers both a command-line interface (CLI) and a desktop GUI application built with Tkinter. The project uses PIL/Pillow for image manipulation.</p>"},{"location":"overview/#key-features","title":"Key Features","text":"<ul> <li>Desktop GUI Application: User-friendly Tkinter interface with real-time logging and threading</li> <li>Command-line Interface: Powerful CLI tool for automation and advanced users</li> <li>Bulk image processing: Process entire directories of images</li> <li>Cropping: Crop images to specific aspect ratios (16:9, 1:1, etc.) from center</li> <li>Resizing: Resize images while maintaining aspect ratio</li> <li>Format conversion: Convert between common image formats (PNG, JPEG, WebP, etc.)</li> <li>Compression quality control: Adjustable quality settings for JPEG and WebP formats (1-100)</li> <li>Watermarking: Add text watermarks with customizable opacity and positioning</li> <li>Error handling: Robust handling of corrupt or invalid image files</li> <li>Responsive UI: Threading keeps the GUI responsive during long processing jobs</li> </ul>"},{"location":"overview/#development-workflow","title":"Development Workflow","text":"<p>This script: 1. Checks for uncommitted changes 2. Prompts for a new branch name 3. Syncs the main branch with remote 4. Creates and switches to the new feature branch</p>"},{"location":"overview/#branch-management","title":"Branch Management","text":"<ul> <li>Main branch: <code>main</code></li> <li>Follow conventional branch naming (e.g., <code>feature/add-user-login</code>, <code>bugfix/memory-leak</code>)</li> <li>Always start new work from an updated main branch</li> </ul>"},{"location":"overview/#project-structure","title":"Project Structure","text":"<ul> <li><code>image_processor.py</code> - Main image processing module with cropping, resizing, watermarking, and batch processing</li> <li><code>app.py</code> - Desktop GUI application built with Tkinter</li> <li><code>requirements.txt</code> - Python dependencies (Pillow, sv_ttk)</li> <li><code>input_images/</code> - Sample input directory for testing</li> <li><code>output_images/</code> - Default output directory for processed images</li> <li><code>.venv/</code> - Python virtual environment (git-ignored)</li> <li><code>src/</code> - Source code directory (legacy, contains empty <code>main</code> file)</li> <li><code>tests/</code> - Test directory (currently empty)</li> <li><code>docs/</code> - Documentation directory (contains GUI screenshot and empty <code>index.md</code>)</li> <li><code>.github/ISSUE_TEMPLATE/</code> - GitHub issue templates for bugs and features</li> <li><code>CHANGELOG.md</code> - Version history and feature additions</li> <li><code>app.spec</code> - PyInstaller specification file (for building executable)</li> <li><code>docs/gui-screenshot.jpg</code> - Screenshot of the GUI application</li> </ul>"},{"location":"overview/#code-standards","title":"Code Standards","text":""},{"location":"overview/#editor-configuration","title":"Editor Configuration","text":"<p>The project uses <code>.editorconfig</code> with the following standards: - Indentation: 2 spaces for all files - Line endings: LF (Unix-style) - Charset: UTF-8 - Trailing whitespace: Trimmed - Final newline: Required</p>"},{"location":"overview/#git-workflow","title":"Git Workflow","text":"<ul> <li>Clean working directory required before starting new features</li> <li>Pull latest changes from <code>origin/main</code> before branching</li> <li>Use descriptive branch names</li> </ul>"},{"location":"reference/","title":"API Reference","text":"<p>This section outlines the core functions available in the <code>image_processor</code> module.</p>"},{"location":"reference/#image_processor","title":"<code>image_processor</code>","text":""},{"location":"reference/#image_processor.process_images","title":"<code>process_images(input_dir, output_dir, new_width=None, new_format=None, watermark_text=None, crop_ratio=None, quality=95, logger=print)</code>","text":"<p>Resizes, converts, watermarks, crops, and compresses all images in a directory.</p> Source code in <code>image_processor.py</code> <pre><code>def process_images(input_dir, output_dir, new_width=None, new_format=None, watermark_text=None, crop_ratio=None, quality=95, logger=print):\n    \"\"\"\n    Resizes, converts, watermarks, crops, and compresses all images in a directory.\n    \"\"\"\n    if not os.path.isdir(input_dir):\n        logger(f\"Error: Input directory '{input_dir}' not found.\")\n        # When called from GUI, we don't want to exit the whole app\n        # sys.exit(1)\n        return\n\n    if not os.path.exists(output_dir):\n        os.makedirs(output_dir)\n        logger(f\"Created directory: {output_dir}\")\n\n    for filename in os.listdir(input_dir):\n        input_path = os.path.join(input_dir, filename)\n        valid_extensions = ('.png', '.jpg', '.jpeg', '.gif', '.bmp', '.webp')\n        if not os.path.isfile(input_path) or not filename.lower().endswith(valid_extensions):\n            logger(f\"Skipped: '{filename}' is not a recognized image file.\")\n            continue\n\n        try:\n            with Image.open(input_path) as img:\n                processed_img = img.copy()\n\n                if crop_ratio:\n                    processed_img = crop_image(processed_img, crop_ratio, logger=logger)\n                    logger(f\"Cropped '{filename}' to {crop_ratio} aspect ratio\")\n\n                if new_width:\n                    width, height = processed_img.size\n                    aspect_ratio = height / width\n                    new_height = int(new_width * aspect_ratio)\n                    processed_img = processed_img.resize((new_width, new_height), Image.Resampling.LANCZOS)\n                    logger(f\"Resized '{filename}' to {new_width}px wide\")\n\n                if watermark_text:\n                    processed_img = add_watermark(processed_img, watermark_text, logger=logger)\n                    logger(f\"Added watermark to '{filename}'\")\n\n                output_filename = filename\n                current_format = new_format if new_format else os.path.splitext(filename)[1][1:].lower()\n\n                if new_format:\n                    base_filename, _ = os.path.splitext(filename)\n                    output_filename = f\"{base_filename}.{new_format.lower()}\"\n\n                output_path = os.path.join(output_dir, output_filename)\n\n                save_options = {}\n                if current_format in ['jpeg', 'jpg', 'webp']:\n                    save_options['quality'] = quality\n                    logger(f\"Set quality for '{filename}' to {quality}\")\n\n                if current_format in ['jpeg', 'jpg']:\n                    if processed_img.mode in (\"RGBA\", \"P\"):\n                        processed_img = processed_img.convert(\"RGB\")\n\n                processed_img.save(output_path, **save_options)\n                logger(f\"Saved processed image to '{output_path}'\")\n\n        except UnidentifiedImageError:\n            logger(f\"Could not process '{filename}'. It may be corrupt or not a valid image file.\")\n        except Exception as e:\n            logger(f\"An unexpected error occurred with '{filename}': {e}\")\n</code></pre>"},{"location":"reference/#image_processor.crop_image","title":"<code>crop_image(image, aspect_ratio_str, logger=print)</code>","text":"<p>Crops an image to a specific aspect ratio from the center.</p> Source code in <code>image_processor.py</code> <pre><code>def crop_image(image, aspect_ratio_str, logger=print):\n    \"\"\"\n    Crops an image to a specific aspect ratio from the center.\n    \"\"\"\n    try:\n        ratio_w, ratio_h = map(int, aspect_ratio_str.split(':'))\n    except ValueError:\n        logger(f\"Invalid aspect ratio format: '{aspect_ratio_str}'. Use format like '16:9'.\")\n        return image\n\n    img_w, img_h = image.size\n    target_ratio = ratio_w / ratio_h\n\n    if (img_w / img_h) &gt; target_ratio:\n        new_h = img_h\n        new_w = int(new_h * target_ratio)\n    else:\n        new_w = img_w\n        new_h = int(new_w / target_ratio)\n\n    left = (img_w - new_w) // 2\n    top = (img_h - new_h) // 2\n    right = (img_w + new_w) // 2\n    bottom = (img_h + new_h) // 2\n\n    return image.crop((left, top, right, bottom))\n</code></pre>"},{"location":"reference/#image_processor.add_watermark","title":"<code>add_watermark(image, text, font_size=36, opacity=128, logger=print)</code>","text":"<p>Adds a text watermark to an image.</p> Source code in <code>image_processor.py</code> <pre><code>def add_watermark(image, text, font_size=36, opacity=128, logger=print):\n    \"\"\"\n    Adds a text watermark to an image.\n    \"\"\"\n    watermark_image = image.copy().convert(\"RGBA\")\n    txt_layer = Image.new(\"RGBA\", watermark_image.size, (255, 255, 255, 0))\n\n    try:\n        font = ImageFont.truetype(\"arial.ttf\", font_size)\n    except IOError:\n        logger(\"Arial font not found. Using default font.\")\n        font = ImageFont.load_default()\n\n    draw = ImageDraw.Draw(txt_layer)\n    image_width, image_height = watermark_image.size\n    margin = 10\n    text_bbox = draw.textbbox((0, 0), text, font=font)\n    text_width = text_bbox[2] - text_bbox[0]\n    text_height = text_bbox[3] - text_bbox[1]\n    position = (image_width - text_width - margin, image_height - text_height - margin)\n    draw.text(position, text, font=font, fill=(255, 255, 255, opacity))\n    return Image.alpha_composite(watermark_image, txt_layer)\n</code></pre>"},{"location":"roadmap/","title":"Project Roadmap","text":"<p>This document outlines the current status of the project and planned features for future releases.</p>"},{"location":"roadmap/#completed-features","title":"\u2705 Completed Features","text":"<p>Version 1.1.0 (Documentation Update) - [x] Full documentation site with MkDocs. - [x] Contributing guidelines and architectural overview.</p> <p>Version 1.0.0 (Initial Release) - [x] Desktop GUI with dark mode (sv_ttk). - [x] Bulk processing (entire folders). - [x] Smart center-cropping (1:1, 16:9). - [x] Format conversion (JPEG, PNG, WebP). - [x] Adjustable compression quality. - [x] Watermarking support.</p>"},{"location":"roadmap/#future-enhancements","title":"\ud83d\ude80 Future Enhancements","text":"<p>These are the prioritized features we plan to work on next.</p>"},{"location":"roadmap/#short-term","title":"Short Term","text":"<ul> <li>[X] Test Suite: Implement <code>pytest</code> to ensure image processing logic is robust and regression-free.</li> <li>[ ] Configuration Files: Allow saving/loading user presets (e.g., \"Instagram Settings\" or \"Web Optimization\").</li> <li>[ ] Structured Logging: Replace <code>print</code> statements in the CLI with a proper Python <code>logging</code> configuration.</li> </ul>"},{"location":"roadmap/#medium-term","title":"Medium Term","text":"<ul> <li>[ ] Drag-and-Drop: Allow users to drag files directly into the GUI window.</li> <li>[ ] Image Effects: Add basic filters like Brightness, Contrast, and Saturation.</li> <li>[ ] Advanced Filenaming: Add support for prefixes, suffixes, and custom naming patterns (e.g., <code>img_001_processed.jpg</code>).</li> </ul>"},{"location":"roadmap/#long-term","title":"Long Term","text":"<ul> <li>[ ] Plugin System: Allow 3rd party developers to write custom effect scripts.</li> <li>[ ] Multi-threading: Process multiple images in parallel (currently one by one in a background thread).</li> </ul> <p>Please feel free to open an issue or submit a pull request.</p>"}]}